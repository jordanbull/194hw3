Based on discussion at http://www.rubyinside.com/advent2006/10-gserver.html, and
code at https://gist.github.com/767666.
